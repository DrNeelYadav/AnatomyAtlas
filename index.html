<!DOCTYPE html>
<html lang="en" class="js">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>e-Anatomy - Advanced MRI Brain Atlas</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Roboto+Mono&display=swap" rel="stylesheet">
</head>
<body class="flex flex-col min-h-screen bg-gray-100">

    <!-- SVG Icons Definition -->
    <svg width="0" height="0" class="hidden">
        <symbol id="icon-layout-1x1" viewBox="0 0 24 24"><path fill="currentColor" d="M3 3v18h18V3H3zm16 16H5V5h14v14z"/></symbol>
        <symbol id="icon-layout-2x2" viewBox="0 0 24 24"><path fill="currentColor" d="M3 3v18h18V3H3zm8 16H5v-8h6v8zm0-10H5V5h6v4zm8 10h-6v-8h6v8zm0-10h-6V5h6v4z"/></symbol>
    </svg>

    <!-- Header -->
    <header class="header shadow-md bg-white">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-3"><i class="fas fa-brain text-3xl text-blue-600"></i><h1 class="text-2xl font-extrabold text-gray-800">e-Anatomy</h1></div>
            <nav class="hidden lg:flex items-center space-x-8 font-medium">
                 <!-- Navigation Links -->
            </nav>
            <div class="flex items-center space-x-2 md:space-x-4">
                <button id="theme-toggle" class="icon-btn text-gray-600 hover:text-blue-600" title="Toggle Dark Mode"><i class="fas fa-moon"></i></button>
                <button id="signin-btn" class="px-4 py-2 text-sm font-semibold text-white bg-blue-600 rounded-md hover:bg-blue-700">Sign In</button>
                <div id="user-menu" class="relative dropdown hidden">
                    <button class="icon-btn text-gray-600 hover:text-blue-600 dropdown-toggle" title="User Profile"><i class="fas fa-user-circle text-2xl"></i></button>
                    <div class="dropdown-menu right-0 absolute hidden bg-white shadow-lg rounded-md mt-2 py-2 w-64">
                        <div class="px-4 py-3 border-b"><p class="font-semibold" id="user-name-display">User</p></div>
                        <a href="#" id="bookmarks-btn" class="block px-4 py-2 text-gray-700 hover:bg-blue-50"><i class="fas fa-bookmark mr-2 w-5"></i>Bookmarks</a>
                        <a href="#" id="logout-btn" class="block px-4 py-2 text-red-600 hover:bg-red-50"><i class="fas fa-sign-out-alt mr-2 w-5"></i>Logout</a>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content Area -->
    <div id="main-container" class="flex-grow container mx-auto px-4 py-6 flex flex-col lg:flex-row space-y-4 lg:space-y-0 lg:space-x-4">
        <aside id="sidebar" class="lg:w-1/3 xl:w-1/4 flex-shrink-0 transition-all duration-300">
            <div class="sidebar rounded-lg shadow-lg h-full flex flex-col bg-white">
                <div class="flex border-b">
                    <button class="sidebar-tab active" data-tab="structures" title="Structures"><i class="fas fa-sitemap"></i><span class="tab-text">Structures</span></button>
                    <button id="toggle-sidebar" class="ml-auto icon-btn text-gray-500 hover:text-blue-600 p-3"><i class="fas fa-chevron-left"></i></button>
                </div>
                <div class="sidebar-panel active" id="panel-structures">
                    <div class="p-4 border-b"><div class="relative"><input type="text" id="structure-search" placeholder="Search structures..." class="w-full pl-10 pr-4 py-2 border rounded-full"><i class="fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i></div></div>
                    <div id="structure-list" class="flex-grow overflow-y-auto sidebar-scrollable"></div>
                </div>
            </div>
        </aside>

        <main class="flex-grow flex flex-col">
            <div class="bg-white rounded-lg shadow-lg overflow-hidden h-full flex flex-col">
                <div class="module-anatomy-container">
                    <div class="anatomy-top-bar p-2 flex justify-between items-center">
                        <div class="flex items-center space-x-1">
                            <button class="layout-btn active" data-layout="1x1" title="1x1 Layout"><svg class="w-5 h-5"><use xlink:href="#icon-layout-1x1"></use></svg></button>
                            <button class="layout-btn" data-layout="2x2" title="2x2 Layout"><svg class="w-5 h-5"><use xlink:href="#icon-layout-2x2"></use></svg></button>
                        </div>
                        <div class="anatomy-controls flex items-center space-x-1 md:space-x-2">
                            <button class="icon-btn p-2 tool-btn" id="quiz-mode-btn" title="Practice Mode (P)"><i class="fas fa-question"></i></button>
                            <button class="icon-btn p-2 tool-btn" id="cine-mode-btn" title="Cine Mode (Spacebar)"><i class="fas fa-play"></i></button>
                            <button class="icon-btn p-2 tool-btn active" data-tool="pointer" title="Pointer (V)"><i class="fas fa-mouse-pointer"></i></button>
                            <button id="reset-view" class="icon-btn p-2" title="Reset View (R)"><i class="fas fa-expand"></i></button>
                             <button id="shortcuts-btn" class="icon-btn p-2" title="Keyboard Shortcuts"><i class="fas fa-keyboard"></i></button>
                        </div>
                    </div>
                    <div id="viewer-grid" class="flex-grow grid grid-cols-1 grid-rows-1 relative bg-black">
                        <div id="anatomy-viewer-1" class="anatomy-viewer relative" data-view-type="Axial"><canvas class="annotation-canvas absolute top-0 left-0 w-full h-full z-10"></canvas><img class="main-anatomy-image" src="https://placehold.co/1200x900/000000/FFFFFF?text=Axial+14" alt="MRI axial brain"><div class="viewer-info-overlay"><p>Axial</p></div></div>
                        <div id="anatomy-viewer-2" class="anatomy-viewer relative hidden" data-view-type="Sagittal"><canvas class="annotation-canvas absolute top-0 left-0 w-full h-full z-10"></canvas><img class="main-anatomy-image" src="https://placehold.co/1200x900/000000/FFFFFF?text=Sagittal+128" alt="MRI sagittal brain"><div class="viewer-info-overlay"><p>Sagittal</p></div></div>
                        <div id="anatomy-viewer-3" class="anatomy-viewer relative hidden" data-view-type="Coronal"><canvas class="annotation-canvas absolute top-0 left-0 w-full h-full z-10"></canvas><img class="main-anatomy-image" src="https://placehold.co/1200x900/000000/FFFFFF?text=Coronal+128" alt="MRI coronal brain"><div class="viewer-info-overlay"><p>Coronal</p></div></div>
                        <div id="anatomy-viewer-4" class="anatomy-viewer relative hidden bg-gray-900 items-center justify-center text-gray-500"><p>3D View</p></div>
                    </div>
                    <div class="anatomy-bottom-bar p-2 flex items-center space-x-3 bg-gray-800 border-t border-gray-700">
                        <button id="prev-image" class="icon-btn p-2" title="Previous Image"><i class="fas fa-arrow-left"></i></button>
                        <span id="image-counter" class="text-gray-300 font-mono text-sm w-20 text-center">14 / 25</span>
                        <input type="range" id="image-slider" class="w-full" min="0" max="24" value="13">
                        <button id="next-image" class="icon-btn p-2" title="Next Image"><i class="fas fa-arrow-right"></i></button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modals -->
    <div id="signin-modal" class="modal-overlay">
        <div class="modal-content">
            <h2 class="text-2xl font-bold mb-4">Sign In</h2>
            <p class="text-gray-600 mb-4">Sign in to access premium features like bookmarks and sharing.</p>
            <button id="google-signin-btn" class="w-full bg-red-500 text-white p-2 rounded flex items-center justify-center"><i class="fab fa-google mr-2"></i>Sign in with Google</button>
            <button type="button" class="close-modal-btn w-full mt-4 bg-gray-200 text-gray-800 p-2 rounded">Cancel</button>
        </div>
    </div>

    <div id="shortcuts-modal" class="modal-overlay">
        <div class="modal-content">
             <div class="flex justify-between items-center mb-4">
                <h2 class="text-2xl font-bold">Keyboard Shortcuts</h2>
                <button class="close-modal-btn text-2xl text-gray-500 hover:text-gray-800">&times;</button>
            </div>
            <ul class="space-y-2 text-gray-700">
                <li class="flex justify-between p-2 rounded"><span>Cine Mode</span><kbd class="font-mono bg-white px-2 py-1 rounded border">Spacebar</kbd></li>
                <li class="flex justify-between p-2 rounded bg-gray-100"><span>Practice/Quiz Mode</span><kbd class="font-mono bg-white px-2 py-1 rounded border">P</kbd></li>
            </ul>
        </div>
    </div>

    <div id="context-menu" class="absolute hidden bg-white shadow-lg rounded-md py-2 w-48 z-50"></div>
    <div id="toast-container" class="fixed bottom-5 right-5 z-50 space-y-2"></div>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="script.js"></script>
    <script src="features.js"></script>
</body>
</html>
